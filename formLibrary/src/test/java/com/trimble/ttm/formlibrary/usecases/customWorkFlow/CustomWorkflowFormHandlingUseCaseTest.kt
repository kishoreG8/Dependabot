package com.trimble.ttm.formlibrary.usecases.customWorkFlow

import com.trimble.ttm.commons.model.FormFieldType
import com.trimble.ttm.commons.model.Recipients
import com.trimble.ttm.commons.moduleCommunicator.AppModuleCommunicator
import com.trimble.ttm.commons.utils.FREETEXT_KEY
import com.trimble.ttm.commons.utils.LATLNG_KEY
import com.trimble.ttm.commons.utils.LOCATION_KEY
import com.trimble.ttm.commons.utils.MULTIPLECHOICE_KEY
import com.trimble.ttm.commons.utils.ODOMETER_KEY
import com.trimble.ttm.formlibrary.model.CustomWorkFlowFormResponse
import com.trimble.ttm.formlibrary.model.CustomWorkFlowFormResponseIntent
import com.trimble.ttm.formlibrary.model.Data
import com.trimble.ttm.formlibrary.model.DataAutoLatLong
import com.trimble.ttm.formlibrary.model.DataAutoLocation
import com.trimble.ttm.formlibrary.model.DataMultipleChoice
import com.trimble.ttm.formlibrary.model.DataNumericEnhanced
import com.trimble.ttm.formlibrary.model.FormData
import com.trimble.ttm.formlibrary.model.IMField
import com.trimble.ttm.formlibrary.model.IMessage
import com.trimble.ttm.formlibrary.model.Recipient
import com.trimble.ttm.formlibrary.repo.cawb.CustomWorkFlowFormResponseSaveRepo
import com.trimble.ttm.formlibrary.usecases.CustomWorkflowFormHandleUseCase
import com.trimble.ttm.formlibrary.utils.EMPTY_STRING
import io.mockk.MockKAnnotations
import io.mockk.coEvery
import io.mockk.coVerify
import io.mockk.impl.annotations.RelaxedMockK
import io.mockk.just
import io.mockk.mockk
import io.mockk.runs
import kotlinx.coroutines.test.runTest
import org.junit.Assert.assertNotEquals
import org.junit.Before
import org.junit.Test
import kotlin.test.assertEquals
import kotlin.test.assertNotNull
import kotlin.test.assertNull

class CustomWorkflowFormHandlingUseCaseTest {
    //sample form responses for CAWB
    private val breakSuggestionFormIntent =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_iMessage_data PUBLIC \"-//PeopleNet//pnet_iMessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_iMessage_data.dtd\"><pnet_iMessage_data><imessage><vehicle_number>7050213</vehicle_number><created_datetime>02/01/23 12:15:23</created_datetime><received_datetime>02/01/23 12:15:23</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>66446</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>8080</data_text></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Rest Start</mc_choicetext></data_multiple-choice></data></im_field></formdata></imessage></pnet_iMessage_data>"
    private val suggestedBreakFormIntent =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_iMessage_data PUBLIC \"-//PeopleNet//pnet_iMessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_iMessage_data.dtd\"><pnet_iMessage_data><imessage><vehicle_number>7050213</vehicle_number><created_datetime>02/01/23 12:15:26</created_datetime><received_datetime>02/01/23 12:15:26</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>64520</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Generated by WorkBreak</data_text></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>Later</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Rest Start</data_text></data></im_field><im_field><field_number>5</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>8080</data_text></data></im_field></formdata></imessage></pnet_iMessage_data>"
    private val manualBreakFormIntent =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_iMessage_data PUBLIC \"-//PeopleNet//pnet_iMessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_iMessage_data.dtd\"><pnet_iMessage_data><imessage><vehicle_number>7050213</vehicle_number><created_datetime>01/31/23 13:21:39</created_datetime><received_datetime>01/31/23 13:21:39</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>64521</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>8080</data_text></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Rest Start</mc_choicetext></data_multiple-choice></data></im_field></formdata></imessage></pnet_iMessage_data>"

    //sample form responses for tanker workflow
    private val tankerWorkflowDeliveryIntent =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>40516</recip_uid><recip_name>saravan</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>21516</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>401120930</num_formatted><num_raw>401120930</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>5</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>6</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSWIN01</data_text></data></im_field><im_field><field_number>7</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSTCO LOC 153</data_text></data></im_field><im_field><field_number>8</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1499 Regent Ave</data_text></data></im_field><im_field><field_number>9</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>10</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>WINNIPEG, MB</data_text></data></im_field><im_field><field_number>11</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>R2C 4M4</data_text></data></im_field><im_field><field_number>12</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_date>12/01/15</data_date></data></im_field><im_field><field_number>13</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_time>15:00</data_time></data></im_field><im_field><field_number>14</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Instructions</data_text></data></im_field><im_field><field_number>15</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Routing</data_text></data></im_field><im_field><field_number>16</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Misc1</data_text></data></im_field><im_field><field_number>17</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>18</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2046542946</data_text></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Fuel</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>7ELSTE.JPG</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSTCO LOC 153</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325B</data_text></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>35</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>36</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>37</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100001.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95000</num_formatted><num_raw>95000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100002.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Ethanol</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96000</num_formatted><num_raw>96000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>96000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100003.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Kerosine</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>97000</num_formatted><num_raw>97000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>97000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100004.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95100</num_formatted><num_raw>95100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95100</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>5</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Tank100005.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95200</num_formatted><num_raw>95200</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95200</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>6</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100006.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Ethanol</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96100</num_formatted><num_raw>96100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>96100</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95000</num_formatted><num_raw>95000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2</num_formatted><num_raw>2</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3</num_formatted><num_raw>3</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>10001</num_formatted><num_raw>10001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1000</num_formatted><num_raw>1000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2</num_formatted><num_raw>2</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ETHANOL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96000</num_formatted><num_raw>96000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4</num_formatted><num_raw>4</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>6</num_formatted><num_raw>6</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>10001</num_formatted><num_raw>10001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2000</num_formatted><num_raw>2000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3</num_formatted><num_raw>3</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>KEROSINE</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>97000</num_formatted><num_raw>97000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5</num_formatted><num_raw>5</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>7</num_formatted><num_raw>7</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>30001</num_formatted><num_raw>30001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3000</num_formatted><num_raw>3000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>y</data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>22222</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4</num_formatted><num_raw>4</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95100</num_formatted><num_raw>95100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>8</num_formatted><num_raw>8</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>9</num_formatted><num_raw>9</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>40001</num_formatted><num_raw>40001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4000</num_formatted><num_raw>4000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>44444</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location><latitude>17.89</latitude>\n" +
                "                        <longitude>-80.09</longitude></data_auto_location></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>0</latitude><longitude>0</longitude></data_auto_latlong></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>131773.8</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.8</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field></formdata></imessage></pnet_imessage_data>"
    private val tankerWorkflowPickUpIntent =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:17</created_datetime><received_datetime>04/01/24 17:13:17</received_datetime><recipient><recip_uid>40516</recip_uid><recip_name>saravan</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>21494</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>401120930</num_formatted><num_raw>401120930</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>0</num_formatted><num_raw>0</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>0</num_formatted><num_raw>0</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>5</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHESTB</data_text></data></im_field><im_field><field_number>6</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHELL CANADA PRODUCTS</data_text></data></im_field><im_field><field_number>7</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>212 Panet Road</data_text></data></im_field><im_field><field_number>8</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>9</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>WINNIPEG, MB</data_text></data></im_field><im_field><field_number>10</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>R2J OS3</data_text></data></im_field><im_field><field_number>11</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_date>12/01/15</data_date></data></im_field><im_field><field_number>12</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_time>12:00</data_time></data></im_field><im_field><field_number>13</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Pickup 1 Instructions</data_text></data></im_field><im_field><field_number>14</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Fuel</data_text></data></im_field><im_field><field_number>15</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Pickup 1 Misc1</data_text></data></im_field><im_field><field_number>16</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Pickup 1 Misc2</data_text></data></im_field><im_field><field_number>17</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Pickup 1 Misc3</data_text></data></im_field><im_field><field_number>18</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Pickup 1 Misc4</data_text></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>5018234523</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>8009238022</data_text></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Fuel</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1EAMOO.JPG</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Canada Products</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325B</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>35</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>36</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>38</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>10001</data_text></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>000</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>111</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>222</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>333</data_text></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>444</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>555</data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>666</data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>777</data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>888</data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>999</data_text></data></im_field><im_field><field_number>49</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1010</data_text></data></im_field><im_field><field_number>50</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1111</data_text></data></im_field><im_field><field_number>51</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>38</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>30001</data_text></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>aaa</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>bbb</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ccc</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ddd</data_text></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>eee</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>fff</data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ggg</data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>hhh</data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>iii</data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>jjj</data_text></data></im_field><im_field><field_number>49</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>kkk</data_text></data></im_field><im_field><field_number>50</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>lll</data_text></data></im_field><im_field><field_number>51</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>10001</data_text></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5000</num_formatted><num_raw>5000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1000</num_formatted><num_raw>1000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>.1</data_text></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1100</num_formatted><num_raw>1100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1000</num_formatted><num_raw>1000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1000</num_formatted><num_raw>1000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHESTB</data_text></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1-PLANT1</data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>22222</data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1500</num_formatted><num_raw>1500</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>76</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>77</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>81</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>10001</data_text></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2</num_formatted><num_raw>2</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ETHANOL</data_text></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5000</num_formatted><num_raw>5000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2000</num_formatted><num_raw>2000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>.2</data_text></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2100</num_formatted><num_raw>2100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2000</num_formatted><num_raw>2000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2000</num_formatted><num_raw>2000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHESTB</data_text></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2-PLANT2</data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>22222</data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2500</num_formatted><num_raw>2500</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>76</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>77</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>81</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>30001</data_text></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3</num_formatted><num_raw>3</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>KEROSINE</data_text></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5000</num_formatted><num_raw>5000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3000</num_formatted><num_raw>3000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>.3</data_text></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3100</num_formatted><num_raw>3100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>22222</data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3000</num_formatted><num_raw>3000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3000</num_formatted><num_raw>3000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHESTB</data_text></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3-PLANT3</data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3333</data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3500</num_formatted><num_raw>3500</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>76</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>77</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>81</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>40001</data_text></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4</num_formatted><num_raw>4</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5000</num_formatted><num_raw>5000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4000</num_formatted><num_raw>4000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4</data_text></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4100</num_formatted><num_raw>4100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>44444</data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4000</num_formatted><num_raw>4000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4000</num_formatted><num_raw>4000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SHESTB</data_text></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4-PLANT4</data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>44</data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4500</num_formatted><num_raw>4500</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>76</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>77</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>81</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>85</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location> <latitude>17.89</latitude>\n" +
                "                        <longitude>-80.09</longitude></data_auto_location></data></im_field><im_field><field_number>86</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>0</latitude><longitude>0</longitude></data_auto_latlong></data></im_field><im_field><field_number>87</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>131773.2</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.2</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field></formdata></imessage></pnet_imessage_data>"
    private val tankerWorkflowWithDecimalValues =
        "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>40516</recip_uid><recip_name>saravan</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>21516</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>-4011.20930</num_formatted><num_raw>-4011.20930</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>5</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>6</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSWIN01</data_text></data></im_field><im_field><field_number>7</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSTCO LOC 153</data_text></data></im_field><im_field><field_number>8</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1499 Regent Ave</data_text></data></im_field><im_field><field_number>9</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>10</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>WINNIPEG, MB</data_text></data></im_field><im_field><field_number>11</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>R2C 4M4</data_text></data></im_field><im_field><field_number>12</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_date>12/01/15</data_date></data></im_field><im_field><field_number>13</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_time>15:00</data_time></data></im_field><im_field><field_number>14</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Instructions</data_text></data></im_field><im_field><field_number>15</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Routing</data_text></data></im_field><im_field><field_number>16</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Delivery 2 Misc1</data_text></data></im_field><im_field><field_number>17</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>18</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2046542946</data_text></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Fuel</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>7ELSTE.JPG</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSTCO LOC 153</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>31325B</data_text></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>35</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>36</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>37</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100001.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95000</num_formatted><num_raw>95000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100002.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Ethanol</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96000</num_formatted><num_raw>96000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>96000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100003.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Kerosine</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>97000</num_formatted><num_raw>97000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>97000</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100004.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95100</num_formatted><num_raw>95100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95100</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>5</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Tank100005.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Diesel</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95200</num_formatted><num_raw>95200</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>95200</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>6</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TANK100006.txt</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Ethanol</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96100</num_formatted><num_raw>96100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>96100</data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>48</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95000</num_formatted><num_raw>95000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2</num_formatted><num_raw>2</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3</num_formatted><num_raw>3</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>10001</num_formatted><num_raw>10001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1000</num_formatted><num_raw>1000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2</num_formatted><num_raw>2</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>ETHANOL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>96000</num_formatted><num_raw>96000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4</num_formatted><num_raw>4</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>6</num_formatted><num_raw>6</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>10001</num_formatted><num_raw>10001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>2000</num_formatted><num_raw>2000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>11111</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3</num_formatted><num_raw>3</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>KEROSINE</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>3</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>97000</num_formatted><num_raw>97000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>5</num_formatted><num_raw>5</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>7</num_formatted><num_raw>7</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>30001</num_formatted><num_raw>30001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>3000</num_formatted><num_raw>3000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>y</data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>22222</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4</num_formatted><num_raw>4</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DIESEL</data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>4</data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>95100</num_formatted><num_raw>95100</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>57</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>58</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>8</num_formatted><num_raw>8</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>9</num_formatted><num_raw>9</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>40001</num_formatted><num_raw>40001</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>64</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>4000</num_formatted><num_raw>4000</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>68</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>69</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>44444</data_text></data></im_field><im_field><field_number>70</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>71</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>72</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>73</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location><latitude>17.89</latitude>\n" +
                "                        <longitude>-80.09</longitude></data_auto_location></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>0</latitude><longitude>0</longitude></data_auto_latlong></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>131773.8</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.8</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field></formdata></imessage></pnet_imessage_data>"
    @RelaxedMockK
    private lateinit var customWorkFlowFormResponseSaveRepo: CustomWorkFlowFormResponseSaveRepo
    private lateinit var customWorkflowFormHandleUseCase: CustomWorkflowFormHandleUseCase

    @Before
    fun beforeTest() {
        MockKAnnotations.init(this)
        val appModuleComm: AppModuleCommunicator = mockk()
        customWorkFlowFormResponseSaveRepo = mockk()
        customWorkflowFormHandleUseCase =
            CustomWorkflowFormHandleUseCase(customWorkFlowFormResponseSaveRepo)

        coEvery { appModuleComm.doGetCid() } returns EMPTY_STRING
        coEvery { appModuleComm.doGetTruckNumber() } returns EMPTY_STRING
        coEvery { appModuleComm.doGetObcId() } returns EMPTY_STRING
    }


    @Test
    fun `break suggestion form xml deserialization to data class giving expected data`() = runTest {
        //Given
        val xmlToDeserialize = breakSuggestionFormIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //Then
        assertNotNull(receivedMessageAfterDeserialization?.iMessage)
        assertEquals("7050213", receivedMessageAfterDeserialization?.iMessage?.vehicleNumber)
        assertEquals(
            "02/01/23 12:15:23", receivedMessageAfterDeserialization?.iMessage?.receivedDatetime
        )
        assertEquals("17081", receivedMessageAfterDeserialization?.iMessage?.recipient?.recipUid)
        assertEquals("66446", receivedMessageAfterDeserialization?.iMessage?.formData?.formId)
        assertEquals(
            2, receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.size
        )
        assertEquals(
            "8080",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)!!.data.dataText
        )
        assertEquals(
            "Rest Start",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceText
        )
    }


    @Test
    fun `suggested break form xml deserialization to data class giving expected data`() = runTest {
        //Given
        val xmlToDeserialize = suggestedBreakFormIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //Then
        assertNotNull(receivedMessageAfterDeserialization?.iMessage)
        assertEquals("64520", receivedMessageAfterDeserialization?.iMessage?.formData?.formId)
        assertEquals(
            "yes",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.driverModified
        )
        assertEquals(
            4, receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.size
        )
        assertEquals(
            "Generated by WorkBreak",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataText
        )
        assertEquals(
            "2",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceNum
        )
        assertEquals(
            null,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataMultipleChoice?.mcChoiceNum
        )
        assertEquals(
            "Later",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceText
        )
        assertEquals(
            "2",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceNum
        )

        assertEquals(
            null,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataMultipleChoice?.mcChoiceNum
        )

        assertEquals(
            "Rest Start",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataText
        )
    }

    @Test
    fun `manual break form xml deserialization to data class giving expected data`() = runTest {
        //Given
        val xmlToDeserialize = manualBreakFormIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //Then
        assertNotNull(receivedMessageAfterDeserialization?.iMessage)
        assertEquals("64521", receivedMessageAfterDeserialization?.iMessage?.formData?.formId)
        assertEquals(
            "yes",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.emptyAtStart
        )
        assertEquals(
            2, receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.size
        )
        assertEquals(
            "8080",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataText
        )
        assertEquals(
            null,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataMultipleChoice?.mcChoiceNum
        )
        assertEquals(
            "2",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)!!.fieldNumber
        )
        assertEquals(
            "1",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceNum
        )
    }

    @Test
    fun `form deserialization giving null when unexpected XML structure passed`() = runTest {
        //Given
        val xmlToDeSerialise =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_iMessage_data PUBLIC \"-//PeopleNet//pnet_iMessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_iMessage_data.dtd\"><pnet_iMessage_data><vehicle_number>7050213</vehicle_number><created_datetime>02/01/23 12:15:23</created_datetime><received_datetime>02/01/23 12:15:23</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>66446</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>8080</data_text></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Rest Start</mc_choicetext></data_multiple-choice></data></im_field></formdata></pnet_iMessage_data>"

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeSerialise)

        //Then
        assertNull(receivedMessageAfterDeserialization?.iMessage)


        //Given entirely invalid xml as input to verify whether deserializer is not crashing and giving default values
        val xmlToDeSerialize =
            "<note><to>Workflow</to><from>CAWB</from><heading>Error</heading><body>Giving you wrong XML!</body></note>"

        //When
        val receivedMessage =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeSerialize)

        //Then
        assertNull(receivedMessage?.iMessage)
    }


    @Test
    fun `constructing form response to sent to firestore is valid`() = runTest {
        //Given
        val xmlToDeserialize = suggestedBreakFormIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        //Then
        assert(responseToFirestore?.fieldData!!.isNotEmpty())
        assert(responseToFirestore.recipients!!.isNotEmpty())
    }

    @Test
    fun `constructing form response to sent to firestore is invalid`() = runTest {
        //Given
        val parsedXML = CustomWorkFlowFormResponseIntent()

        //When
        val actualResponse =
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                parsedXML
            )

        //Then
        assert(actualResponse.fieldData!!.isEmpty())
    }

    @Test
    fun `sending form response to firestore not called if parsed XML data is invalid`() = runTest {
        //Given
        val parsedXML = CustomWorkFlowFormResponseIntent()

        //When
        customWorkflowFormHandleUseCase.sendCustomWorkflowResponseToPFM(
            parsedXML
        )

        //Then
        coVerify(exactly = 0) { customWorkFlowFormResponseSaveRepo.addFormResponse(any()) }
    }

    @Test
    fun `sending form response to firestore  called if parsed XML data is valid`() = runTest {
        //Given
        val parsedXML = CustomWorkFlowFormResponseIntent(
            IMessage(
                vehicleNumber = "test", formData = FormData(
                    formId = "12",
                    mutableListOf(
                        IMField(
                            fieldNumber = "2",
                            emptyAtStart = "true",
                            data = Data(dataText = "1"), qType = 1
                        )
                    )
                ), recipient = Recipient(recipName = "test@trimble.com")
            )
        )
        coEvery { customWorkFlowFormResponseSaveRepo.addFormResponse(any()) } just runs

        //When
        customWorkflowFormHandleUseCase.sendCustomWorkflowResponseToPFM(
            parsedXML
        )

        //Then
        coVerify(exactly = 1) { customWorkFlowFormResponseSaveRepo.addFormResponse(any()) }
    }

    @Test
    fun `sending form response to firestore not called if parsed XML data is null`() =
        runTest {
            coEvery { customWorkFlowFormResponseSaveRepo.addFormResponse(any()) } just runs
            //When
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(responseIntentData = "")

            //Then
            coVerify(exactly = 0) { customWorkFlowFormResponseSaveRepo.addFormResponse(any()) }
        }

    @Test
    fun `verify tanker workflow delivery of form response deserialization for decimal values` () = runTest {
        val xmlToDeserialize = tankerWorkflowWithDecimalValues

        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        assertEquals(
            "-4011.20930",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataNumericEnhanced?.numberFormatted
        )
    }

    @Test
    fun `verify tanker workflow delivery form response is sent to firestore`() = runTest {
        val xmlToDeserialize = tankerWorkflowDeliveryIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)
        assertEquals("6609079", receivedMessageAfterDeserialization?.iMessage?.vehicleNumber)
        assertEquals(
            "04/01/24 17:13:54", receivedMessageAfterDeserialization?.iMessage?.receivedDatetime
        )
        assertEquals("40516", receivedMessageAfterDeserialization?.iMessage?.recipient?.recipUid)
        assertEquals("saravan", receivedMessageAfterDeserialization?.iMessage?.recipient?.recipName)
        assertEquals("21516", receivedMessageAfterDeserialization?.iMessage?.formData?.formId)
        assertEquals(
            195, receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.size
        )
        assertEquals(
            401120930,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataNumericEnhanced?.numberFormatted?.toInt()
        )
        assertEquals(
            "2",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.fieldNumber
        )
        assertEquals(
            "",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataNumericEnhanced?.numberFormatted
        )

        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        fun includeTruckInfoInsideResponse(customWorkFlowFormResponse: CustomWorkFlowFormResponse) {
            customWorkFlowFormResponse.cid = "10119"
            customWorkFlowFormResponse.dsn = 37568791
            customWorkFlowFormResponse.truckNumber = "cgvus"
        }

        includeTruckInfoInsideResponse(responseToFirestore!!)

        //Then
        assertEquals(
            195,
            responseToFirestore.fieldData!!.size
        ) //ignore empty response form fields to firestore
    }

    @Test
    fun `verify tanker workflow pickup form response is sent to firestore`() = runTest {
        val xmlToDeserialize = tankerWorkflowPickUpIntent

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //assert deserialized data
        assertEquals("6609079", receivedMessageAfterDeserialization?.iMessage?.vehicleNumber)
        assertEquals(
            "04/01/24 17:13:17", receivedMessageAfterDeserialization?.iMessage?.receivedDatetime
        )
        assertEquals("40516", receivedMessageAfterDeserialization?.iMessage?.recipient?.recipUid)
        assertEquals("saravan", receivedMessageAfterDeserialization?.iMessage?.recipient?.recipName)
        assertEquals("21494", receivedMessageAfterDeserialization?.iMessage?.formData?.formId)
        assertEquals(
            176, receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.size
        )
        assertEquals(
            "401120930",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataNumericEnhanced?.numberFormatted
        )

        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        //Assert response to firestore data length
        assert(responseToFirestore?.fieldData!!.size == 176)
    }

    @Test
    fun `test verify instinct form response constructed as expected for a given tanker blob with no empty form fields`() =
        runTest {
            // Arrange
            val customWFResponse = CustomWorkFlowFormResponseIntent(
                iMessage = IMessage(
                    vehicleNumber = "123",
                    recipient = Recipient(
                        recipUid = "123",
                        recipName = "John Doe"
                    ),
                    formData = FormData(
                        formId = "123",
                        imFields = listOf(
                            IMField(
                                fieldNumber = "1",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataText = "Test"
                                ), qType = 1
                            ), IMField(
                                fieldNumber = "2",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataMultipleChoice = DataMultipleChoice(
                                        mcChoiceNum = "1",
                                        mcChoiceText = "Test"
                                    )
                                ), qType = 2
                            ), IMField(
                                fieldNumber = "3",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataNumericEnhanced = DataNumericEnhanced(
                                        numberFormatted = "1"
                                    )
                                ), qType = 14
                            ), IMField(
                                fieldNumber = "4",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoLatLong = DataAutoLatLong(
                                        latitude = 1.0,
                                        longitude = 1.0
                                    )
                                ), qType = 8
                            ), IMField(
                                fieldNumber = "5",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoOdometer = 10.0
                                ), qType = 9
                            ), IMField(
                                fieldNumber = "6",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataDateTime = "2022-01-01T13:10:00"

                                ), qType = 5
                            ), IMField(
                                fieldNumber = "7",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataFuel = "100"
                                ), qType = 13
                            ), IMField(
                                fieldNumber = "8",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataDate = "2022-01-01"
                                ), qType = 16
                            ), IMField(
                                fieldNumber = "9",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataTime = "13:10:00"
                                ), qType = 4
                            ), IMField(
                                fieldNumber = "10",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoLocation = DataAutoLocation(
                                        latitude = 1.0,
                                        longitude = 1.0
                                    )
                                ), qType = 7
                            )
                        )
                    )
                )
            )

            val expectedInstinctFormResponse = CustomWorkFlowFormResponse(
                dsn = 0L,
                uniqueTemplateTag = 123,
                recipients = mutableListOf(
                    Recipients(
                        recipientPfmUser = "123",
                        recipientEmailUser = "John Doe"
                    )
                ),
                fieldData = arrayListOf(
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"Test\",\"fieldNumber\":\"1\"}"
                    ),
                    hashMapOf(
                        MULTIPLECHOICE_KEY to "{\"choice\":1,\"fieldNumber\":\"2\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"1\",\"fieldNumber\":\"3\"}"
                    ),
                    hashMapOf(
                        LATLNG_KEY to "{\"latitude\":1.0,\"longitude\":1.0,\"gpsQuality\":0,\"fieldNumber\":\"4\"}"
                    ),
                    hashMapOf(
                        ODOMETER_KEY to "{\"j1708\":62,\"gps\":62,\"fieldNumber\":\"5\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"2022-01-01T13:10:00\",\"fieldNumber\":\"6\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"100\",\"fieldNumber\":\"7\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"2022-01-01\",\"fieldNumber\":\"8\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"13:10:00\",\"fieldNumber\":\"9\"}"
                    ),
                    hashMapOf(
                        LOCATION_KEY to "{\"latitude\":1.0,\"longitude\":1.0,\"gpsQuality\":0,\"fieldNumber\":\"10\"}"
                    )
                ),
            )

            // Act
            val result =
                customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                    customWFResponse
                )

            // Assert
            assertNotNull(result.creationDateTime?.isNotEmpty())
            assertEquals(expectedInstinctFormResponse.cid, result.cid)
            assertEquals(expectedInstinctFormResponse.dsn, result.dsn)
            assertEquals("123", expectedInstinctFormResponse.recipients?.get(0)?.recipientPfmUser)
            assertEquals(
                "John Doe",
                expectedInstinctFormResponse.recipients?.get(0)?.recipientEmailUser
            )
            assertEquals(expectedInstinctFormResponse.uniqueTemplateTag, result.uniqueTemplateTag)
            assertEquals(expectedInstinctFormResponse.fieldData, result.fieldData)
        }

    @Test
    fun `test verify instinct form response constructed as expected for a given tanker blob if there are empty form fields or default values like 0`() =
        runTest {
            // Arrange
            val customWFResponse = CustomWorkFlowFormResponseIntent(
                iMessage = IMessage(
                    vehicleNumber = "123",
                    recipient = Recipient(
                        recipUid = "123",
                        recipName = "John Doe"
                    ),
                    formData = FormData(
                        formId = "123",
                        imFields = listOf(
                            IMField(
                                fieldNumber = "1",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataText = ""
                                ),
                                qType = 1
                            ), IMField(
                                fieldNumber = "2",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataMultipleChoice = DataMultipleChoice(
                                        mcChoiceNum = "1",
                                        mcChoiceText = "Test"
                                    )
                                ),
                                qType = 2
                            ), IMField(
                                fieldNumber = "3",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataNumericEnhanced = DataNumericEnhanced(
                                        numberFormatted = ""
                                    )
                                ),
                                qType = 14
                            ), IMField(
                                fieldNumber = "4",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoLatLong = DataAutoLatLong(
                                        latitude = 0.0,
                                        longitude = 1.0 //latitude is empty so we need to ignore this field to PFM
                                    )
                                ),
                                qType = 8
                            ), IMField(
                                fieldNumber = "5",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoOdometer = 0.0
                                ),
                                qType = 9
                            ), IMField(
                                fieldNumber = "6",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataDateTime = "2022-01-01T13:10:00"

                                ),
                                qType = 5
                            ), IMField(
                                fieldNumber = "7",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataFuel = ""
                                ),
                                qType = 13
                            ), IMField(
                                fieldNumber = "8",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataDate = "2022-01-01"
                                ),
                                qType = 16
                            ), IMField(
                                fieldNumber = "9",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataTime = ""
                                ),
                                qType = 4
                            ), IMField(
                                fieldNumber = "10",
                                emptyAtStart = "true",
                                driverModified = "true",
                                data = Data(
                                    dataAutoLocation = DataAutoLocation(
                                        latitude = 0.0,
                                        longitude = 0.0
                                    )
                                ),
                                qType = 7
                            )
                        )
                    )
                )
            )

            val expectedInstinctFormResponse = CustomWorkFlowFormResponse(
                dsn = 0L,
                uniqueTemplateTag = 123,
                recipients = mutableListOf(
                    Recipients(
                        recipientPfmUser = 123,
                        recipientEmailUser = "John Doe"
                    )
                ),

                fieldData = arrayListOf(
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"\",\"fieldNumber\":\"1\"}"
                    ),
                    hashMapOf(
                        MULTIPLECHOICE_KEY to "{\"choice\":1,\"fieldNumber\":\"2\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"\",\"fieldNumber\":\"3\"}"
                    ),
                    hashMapOf(
                        LATLNG_KEY to "{\"latitude\":0.0,\"longitude\":1.0,\"gpsQuality\":0,\"fieldNumber\":\"4\"}"
                    ),
                    hashMapOf(
                        ODOMETER_KEY to "{\"j1708\":0,\"gps\":0,\"fieldNumber\":\"5\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"2022-01-01T13:10:00\",\"fieldNumber\":\"6\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"\",\"fieldNumber\":\"7\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"2022-01-01\",\"fieldNumber\":\"8\"}"
                    ),
                    hashMapOf(
                        FREETEXT_KEY to "{\"text\":\"\",\"fieldNumber\":\"9\"}"
                    ),
                    hashMapOf(
                        LOCATION_KEY to "{\"latitude\":0.0,\"longitude\":0.0,\"gpsQuality\":0,\"fieldNumber\":\"10\"}"
                    )
                ),
            )

            // Act
            val result =
                customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                    customWFResponse
                )

            // Then
            assertNotNull(result.creationDateTime?.isNotEmpty())
            assertEquals(expectedInstinctFormResponse.cid, result.cid)
            assertEquals(expectedInstinctFormResponse.dsn, result.dsn)
            assertEquals(123, expectedInstinctFormResponse.recipients?.get(0)?.recipientPfmUser)
            assertEquals(
                "John Doe",
                expectedInstinctFormResponse.recipients?.get(0)?.recipientEmailUser
            )
            assertEquals(expectedInstinctFormResponse.uniqueTemplateTag, result.uniqueTemplateTag)
            assertEquals(expectedInstinctFormResponse.fieldData, result.fieldData)
        }

    @Test
    fun `verify incompatible numeric enhanced fields producing empty string in those fields`() {
        //Given
        val xmlToDeserialize =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\"\n" +
                    "        \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>401120930</num_formatted><num_raw>401120930</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>(skipped)</num_formatted><num_raw>(skipped)</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>NOCHART</num_formatted><num_raw>NOCHART</num_raw></data_numeric-enhanced></data></im_field></formdata></imessage></pnet_imessage_data>"
        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //Then verify that the numeric enhanced fields does not have value NOCHART
        receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.filter {
            it.qType == FormFieldType.NUMERIC_ENHANCED.ordinal
        }!!.forEach {
            assertNotEquals("NOCHART", it.data.dataNumericEnhanced?.numberFormatted)
        }

        //verify the numeric enhanced fields have expected values
        assertEquals(
            "401120930",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(0)?.data?.dataNumericEnhanced?.numberFormatted
        )
        assertEquals(
            "1",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(1)?.data?.dataNumericEnhanced?.numberFormatted
        )

        //verify skipped text and NOCHART non numeric text converted into empty string
        assertEquals(
            "",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(2)?.data?.dataNumericEnhanced?.numberFormatted
        )
        assertEquals(
            "",
            receivedMessageAfterDeserialization.iMessage?.formData?.imFields?.get(3)?.data?.dataNumericEnhanced?.numberFormatted
        )
    }

    @Test
    fun `verify empty or default values are assigned as expected based on field null values`() {
        val givenXML =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>74</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>75</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum></mc_choicenum><mc_choicetext></mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>78</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location>" +
                    "</data_auto_location></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude></latitude><longitude></longitude></data_auto_latlong></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer></data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.8</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_fuel></data_auto_fuel></data></im_field></formdata></imessage></pnet_imessage_data>"
        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(givenXML)

        //Then verify that the empty or default values are assigned as expected
        assertEquals(
            "",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataText
        )
        assertEquals(
            "",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataMultipleChoice?.mcChoiceNum
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataAutoLocation?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataAutoLocation?.longitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(3)?.data?.dataAutoLatLong?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(3)?.data?.dataAutoLatLong?.longitude
        )
        assertEquals(
            -1,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(4)?.data?.dataAutoOdometer
        )
        assertEquals(
            "",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(5)?.data?.dataFuel
        )

        //verify custom workflow response to firestore
        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        //verify the response to firestore
        assertEquals(
            hashMapOf(
                FREETEXT_KEY to "{\"text\":\"\",\"fieldNumber\":\"74\"}"
            ), responseToFirestore?.fieldData?.get(0)
        )
    }

    @Test
    fun `verify default value for auto location and auto lat long`() {
        //Given
        // Empty values for lat and long tags
        val givenXMLWithEmptyValuesForLatAndLong =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude></latitude><longitude></longitude></data_auto_latlong></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location><latitude></latitude><longitude></longitude></data_auto_location></data></im_field></formdata></imessage></pnet_imessage_data>"

        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(
                givenXMLWithEmptyValuesForLatAndLong
            )

        //assert
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.longitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataAutoLocation?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataAutoLocation?.longitude
        )

        //No tags for lat and long
        val xmlWithoutTags =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong></data_auto_latlong></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location></data_auto_location></data></im_field></formdata></imessage></pnet_imessage_data>"
        //When
        val receivedMessageAfterDeserializationWithoutTags =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlWithoutTags)

        //assert
        assertEquals(
            0.0,
            receivedMessageAfterDeserializationWithoutTags?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserializationWithoutTags?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.longitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserializationWithoutTags?.iMessage?.formData?.imFields?.get(1)?.data?.dataAutoLocation?.latitude
        )
        assertEquals(
            0.0,
            receivedMessageAfterDeserializationWithoutTags?.iMessage?.formData?.imFields?.get(1)?.data?.dataAutoLocation?.longitude
        )

        //verify custom workflow response to firestore
        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        //assert
        assertEquals(
            hashMapOf(
                LATLNG_KEY to "{\"latitude\":0.0,\"longitude\":0.0,\"gpsQuality\":0,\"fieldNumber\":\"79\"}"
            ), responseToFirestore?.fieldData?.get(0)
        )

        assertEquals(
            hashMapOf(
                LOCATION_KEY to "{\"latitude\":0.0,\"longitude\":0.0,\"gpsQuality\":0,\"fieldNumber\":\"79\"}"
            ), responseToFirestore?.fieldData?.get(1)
        )

    }

    @Test
    fun `verify odometer,latlong values are parsed as expected`() {
        val givenXML =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>12.955320</latitude><longitude>-80.245510</longitude></data_auto_latlong></data></im_field><im_field><field_number>80</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>131773.8</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.8</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field><im_field><field_number>79</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location><latitude>12.955320</latitude><longitude>-80.245510</longitude></data_auto_location></data></im_field></formdata></imessage></pnet_imessage_data>"
        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(givenXML)

        //Then verify that the odometer, latlong and location values are parsed as expected
        assertEquals(
            12.95532,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.latitude
        )
        assertEquals(
            -80.24551,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.data?.dataAutoLatLong?.longitude
        )
        assertEquals(
            131773.8,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.data?.dataAutoOdometer
        )
        assertEquals(
            12.95532,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataAutoLocation?.latitude
        )
        assertEquals(
            -80.24551,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.data?.dataAutoLocation?.longitude
        )
    }

    @Test
    fun `verify qtype assigned as expected based on field null values`() {
        //Given xml
        val xmlToDeserialize =
            "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><!DOCTYPE pnet_imessage_data PUBLIC \"-//PeopleNet//pnet_imessage_data\" \"http://open.peoplenetonline.com/dtd/pnet_imessage_data.dtd\"><pnet_imessage_data><imessage><vehicle_number>6609079</vehicle_number><created_datetime>04/01/24 17:13:54</created_datetime><received_datetime>04/01/24 17:13:54</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>163529</form_id><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>7</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COSTCO LOC 153</data_text></data></im_field><im_field><field_number>85</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_location><latitude></latitude>\n" +
                    "                        <longitude></longitude></data_auto_location></data></im_field><im_field><field_number>12</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_time>12:00</data_time></data></im_field><im_field><field_number>11</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_date>12/01/15</data_date></data></im_field><im_field><field_number>87</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>131773.2</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>131773.2</data_performx_odometer><data_gps_odometer>0.0</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field><im_field><field_number>86</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>0</latitude><longitude>0</longitude></data_auto_latlong></data></im_field><im_field><field_number>85</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_date_time>29/04/24 03:00</data_date_time></data></im_field><im_field><field_number>82</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_fuel>1000</data_auto_fuel></data></im_field></formdata></imessage></pnet_imessage_data>"
        //When
        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToDeserialize)

        //Then verify that the qType assigned as expected
        assertEquals(
            FormFieldType.NUMERIC_ENHANCED.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(0)?.qType
        )
        assertEquals(
            FormFieldType.TEXT.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(1)?.qType
        )
        assertEquals(
            FormFieldType.AUTO_VEHICLE_LOCATION.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(2)?.qType
        )
        assertEquals(
            FormFieldType.TIME.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(3)?.qType
        )
        assertEquals(
            FormFieldType.DATE.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(4)?.qType
        )
        assertEquals(
            FormFieldType.AUTO_VEHICLE_ODOMETER.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(5)?.qType
        )
        assertEquals(
            FormFieldType.AUTO_VEHICLE_LATLONG.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(6)?.qType
        )
        assertEquals(
            FormFieldType.MULTIPLE_CHOICE.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(7)?.qType
        )
        assertEquals(
            FormFieldType.DATE_TIME.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(8)?.qType
        )
        assertEquals(
            FormFieldType.AUTO_VEHICLE_FUEL.ordinal,
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(9)?.qType
        )
    }

    @Test
    fun `verify image and signature values are parsed as expected in firestore response`() {
        //Given
        val xmlToSerialise =
            "<pnet_imessage_data><imessage><vehicle_number>6603677</vehicle_number><created_datetime>08/07/24 14:43:44</created_datetime><received_datetime>08/07/24 14:43:44</received_datetime><recipient><recip_uid>17081</recip_uid><recip_name>!Dispatch</recip_name></recipient><msn>2052509993</msn><base_msn>-77777</base_msn><message_type>form</message_type><formdata><form_id>133142</form_id><im_field><field_number>2</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>255156-524589</data_text></data></im_field><im_field><field_number>3</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>255156</data_text></data></im_field><im_field><field_number>4</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>524589</num_formatted><num_raw>524589</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>5</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_numeric-enhanced><num_formatted>1</num_formatted><num_raw>1</num_raw></data_numeric-enhanced></data></im_field><im_field><field_number>6</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>7</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>VEHICLE_DELIVERY04528@toyota.com</data_text></data></im_field><im_field><field_number>8</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>9</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>10</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>11</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>12</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>NORTH BAKERSFIELD TOYOTA</data_text></data></im_field><im_field><field_number>13</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>19651 INDUSTRY PRKWY DR.</data_text></data></im_field><im_field><field_number>14</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>800 - 1700</data_text></data></im_field><im_field><field_number>15</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>Dealer Daily</data_text></data></im_field><im_field><field_number>16</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>( )</data_text></data></im_field><im_field><field_number>17</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTNK4RBE2K3017017</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04528</data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COROLLA iM</data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>TBD: OXIDE BRONZE ME.</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>AI11</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DEL</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUNNY</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>No</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>test\n" +
                    "</data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTMRJREV5JD246615</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04528</data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>RAV4 HYBRID</data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUPER WHITE</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DH10</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DEL</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUNNY</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>No</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTMWFREV3JJ202781</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04528</data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>RAV4</data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUPER WHITE</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DI07</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DEL</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUNNY</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>No</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTNK4RBE8K3016499</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04528</data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COROLLA iM</data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>BLIZZARD PEARL</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>BI11</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DEL</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUNNY</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>No</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>19</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTNK4RBE9K3015104</data_text></data></im_field><im_field><field_number>20</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>21</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04528</data_text></data></im_field><im_field><field_number>22</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>COROLLA iM</data_text></data></im_field><im_field><field_number>23</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>BLIZZARD PEARL</data_text></data></im_field><im_field><field_number>24</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>AJ07</data_text></data></im_field><im_field><field_number>25</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>DEL</data_text></data></im_field><im_field><field_number>26</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>SUNNY</data_text></data></im_field><im_field><field_number>27</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>No</data_text></data></im_field><im_field><field_number>28</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>1</mc_choicenum><mc_choicetext>Y</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>29</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>30</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>31</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>32</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>33</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>(skipped)</mc_choicenum><mc_choicetext>(skipped)</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>34</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>38</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>JTNK4RBE2K3017017</data_text></data></im_field><im_field><field_number>39</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>03*04*2</data_text></data></im_field><im_field><field_number>40</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>03</data_text></data></im_field><im_field><field_number>41</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>04</data_text></data></im_field><im_field><field_number>42</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>2</data_text></data></im_field><im_field><field_number>43</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>44</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>b0c30b21-edca-4aa2-b8cd-8e00b722808c</data_text></data></im_field><im_field><field_number>45</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>46</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>47</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>51</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>52</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>53</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>54</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>55</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_image_ref>(skipped)</data_image_ref></data></im_field><im_field><field_number>56</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>59</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>John doe</data_text></data></im_field><im_field><field_number>60</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_image_ref><data_image_date>24/08/07 09:43</data_image_date><data_image_transid>202408070943441776_6603677.sig</data_image_transid><data_image_name>202408070943441776_6603677.sig</data_image_name><data_image_mimetype>image/jpeg</data_image_mimetype></data_image_ref></data></im_field><im_field><field_number>61</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_multiple-choice><mc_choicenum>2</mc_choicenum><mc_choicetext>N</mc_choicetext></data_multiple-choice></data></im_field><im_field><field_number>62</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text></data_text></data></im_field><im_field><field_number>63</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_text>1.2.120.15</data_text></data></im_field><im_field><field_number>65</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_latlong><latitude>45.3584868</latitude><longitude>-92.8806916</longitude></data_auto_latlong></data></im_field><im_field><field_number>66</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_auto_odometer>10.5</data_auto_odometer><data_auto_odometer_plus_gps><data_performx_odometer>10.5</data_performx_odometer><data_gps_odometer>10.5</data_gps_odometer></data_auto_odometer_plus_gps></data></im_field><im_field><field_number>67</field_number><empty_at_start>yes</empty_at_start><driver_modified>yes</driver_modified><data><data_image_ref><data_image_date>24/08/07 09:39</data_image_date><data_image_transid>202487_93714.jpg</data_image_transid><data_image_name>202487_93714.jpg</data_image_name><data_image_mimetype>image/jpeg</data_image_mimetype></data_image_ref></data></im_field></formdata></imessage></pnet_imessage_data>"

        val receivedMessageAfterDeserialization =
            customWorkflowFormHandleUseCase.deserializeFormXMLToDataClass(xmlToSerialise)

       assertEquals(
            "storage202408070943441776_6603677.sig",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(113)?.data?.dataImage?.imageName
        )
        assertEquals(
            "storage202487_93714",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(119)?.data?.dataImage?.imageName
        )

        assertEquals(
            "",
            receivedMessageAfterDeserialization?.iMessage?.formData?.imFields?.get(110)?.data?.dataImage?.imageName
        )

        val responseToFirestore = receivedMessageAfterDeserialization?.let {
            customWorkflowFormHandleUseCase.convertCWFResponseToInstinctFormResponseFormat(
                it
            )
        }

        assertNotEquals("",
            responseToFirestore?.fieldData?.get(113))

        assertNotEquals("",
            responseToFirestore?.fieldData?.get(119))

    }
}
